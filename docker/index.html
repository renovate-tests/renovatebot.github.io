



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Docker Package Manager Support in Renovate">
      
      
        <link rel="canonical" href="https://docs.renovatebot.com/docker/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Docker</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../assets/css/style.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#docker" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.renovatebot.com" title="Renovate Docs" aria-label="Renovate Docs" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Renovate Docs
            </span>
            <span class="md-header-nav__topic">
              
                Docker
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.renovatebot.com" title="Renovate Docs" class="md-nav__button md-logo">
      
        <img alt="logo" src="../assets/images/logo.png" width="48" height="48">
      
    </a>
    Renovate Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-github-app/" title="GitHub App Installation" class="md-nav__link">
      GitHub App Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-gitlab-app/" title="GitLab App Installation" class="md-nav__link">
      GitLab App Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../self-hosting/" title="Self-hosting" class="md-nav__link">
      Self-hosting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-renovate/" title="Configure Renovate (Onboarding PR)" class="md-nav__link">
      Configure Renovate (Onboarding PR)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../private-modules/" title="Private npm module support" class="md-nav__link">
      Private npm module support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reconfigure-renovate/" title="Reconfiguring Renovate" class="md-nav__link">
      Reconfiguring Renovate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration-options/" title="Configuration Options" class="md-nav__link">
      Configuration Options
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../self-hosted-configuration/" title="Self Hosted Configuration" class="md-nav__link">
      Self Hosted Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Renovate Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Renovate Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/platform/" title="Platforms" class="md-nav__link">
      Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/manager/" title="Managers" class="md-nav__link">
      Managers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/datasource/" title="Datasources" class="md-nav__link">
      Datasources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../config-presets/" title="Shareable Config Presets" class="md-nav__link">
      Shareable Config Presets
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../bazel/" title="Bazel" class="md-nav__link">
      Bazel
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Docker
      </label>
    
    <a href="./" title="Docker" class="md-nav__link md-nav__link--active">
      Docker
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How It Works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preservation-of-version-precision" class="md-nav__link">
    Preservation of Version Precision
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-compatibility" class="md-nav__link">
    Version compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digest-pinning" class="md-nav__link">
    Digest Pinning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digest-updating" class="md-nav__link">
    Digest Updating
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-upgrading" class="md-nav__link">
    Version Upgrading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuringdisabling" class="md-nav__link">
    Configuring/Disabling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-all-docker-renovation" class="md-nav__link">
    Disable all Docker Renovation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-renovate-for-only-certain-dockerfiles" class="md-nav__link">
    Disable Renovate for only certain Dockerfiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-docker-major-updates" class="md-nav__link">
    Enable Docker major updates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-digest-pinning" class="md-nav__link">
    Disable digest pinning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automerge-digest-updates" class="md-nav__link">
    Automerge digest updates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registry-authentication" class="md-nav__link">
    Registry authentication
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerhub" class="md-nav__link">
    DockerHub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-hosted-docker-registry" class="md-nav__link">
    Self-hosted Docker registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chartmuseum" class="md-nav__link">
    ChartMuseum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../golang/" title="Golang" class="md-nav__link">
      Golang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javascript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node/" title="Node.js Versions" class="md-nav__link">
      Node.js Versions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nuget/" title="Nuget" class="md-nav__link">
      Nuget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ruby/" title="Ruby" class="md-nav__link">
      Ruby
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Deep Dives
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Deep Dives
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dependency-pinning/" title="Should you Pin your Javascript Dependencies?" class="md-nav__link">
      Should you Pin your Javascript Dependencies?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration-templates/" title="Config Template Editing" class="md-nav__link">
      Config Template Editing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../updating-rebasing/" title="Updating and Rebasing Branches" class="md-nav__link">
      Updating and Rebasing Branches
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../semantic-commits/" title="Semantic Commit Messages" class="md-nav__link">
      Semantic Commit Messages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../noise-reduction/" title="Noise Reduction" class="md-nav__link">
      Noise Reduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../automerge-configuration/" title="Automerging Updates" class="md-nav__link">
      Automerging Updates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Included Presets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Included Presets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-config/" title="Full Config Presets" class="md-nav__link">
      Full Config Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-default/" title="Default Presets" class="md-nav__link">
      Default Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-docker/" title="Docker Presets" class="md-nav__link">
      Docker Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-group/" title="Group Presets" class="md-nav__link">
      Group Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-helpers/" title="Helper Presets" class="md-nav__link">
      Helper Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-monorepo/" title="Monorepo Presets" class="md-nav__link">
      Monorepo Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-packages/" title="Package Presets" class="md-nav__link">
      Package Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-preview/" title="Preview Presets" class="md-nav__link">
      Preview Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-schedule/" title="Schedule Presets" class="md-nav__link">
      Schedule Presets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      All Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        All Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../merge-confidence/" title="Merge Confidence" class="md-nav__link">
      Merge Confidence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How It Works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preservation-of-version-precision" class="md-nav__link">
    Preservation of Version Precision
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-compatibility" class="md-nav__link">
    Version compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digest-pinning" class="md-nav__link">
    Digest Pinning
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#digest-updating" class="md-nav__link">
    Digest Updating
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-upgrading" class="md-nav__link">
    Version Upgrading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuringdisabling" class="md-nav__link">
    Configuring/Disabling
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-all-docker-renovation" class="md-nav__link">
    Disable all Docker Renovation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-renovate-for-only-certain-dockerfiles" class="md-nav__link">
    Disable Renovate for only certain Dockerfiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-docker-major-updates" class="md-nav__link">
    Enable Docker major updates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-digest-pinning" class="md-nav__link">
    Disable digest pinning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automerge-digest-updates" class="md-nav__link">
    Automerge digest updates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registry-authentication" class="md-nav__link">
    Registry authentication
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dockerhub" class="md-nav__link">
    DockerHub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#self-hosted-docker-registry" class="md-nav__link">
    Self-hosted Docker registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chartmuseum" class="md-nav__link">
    ChartMuseum
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="docker">Docker</h1>
<p>Renovate supports upgrading dependencies in various types of Docker definition files:</p>
<ul>
<li>Docker's <code>Dockerfile</code> files</li>
<li>Docker Compose <code>docker-compose.yml</code> files</li>
<li>CircleCI config files</li>
<li>Kubernetes manifest files</li>
<li>Ansible configuration files</li>
</ul>
<h2 id="how-it-works">How It Works</h2>
<ol>
<li>Renovate searches in each repository for any files matching each manager's configured <code>fileMatch</code> pattern(s)</li>
<li>Matching files are parsed, Renovate checks if the file(s) contain any Docker image references (e.g. <code>FROM</code> lines in a <code>Dockerfile</code>)</li>
<li>If the image tag in use "looks" like a version (e.g. <code>myimage:1</code>, <code>myimage:1.1</code>, <code>myimage:1.1.0</code>, <code>myimage:1-onbuild</code>) then Renovate checks the Docker registry for upgrades (e.g. from <code>myimage:1.1.0</code> to <code>myimage:1.2.0</code>)</li>
</ol>
<h2 id="preservation-of-version-precision">Preservation of Version Precision</h2>
<p>By default, Renovate preserves the precision level specified in the Docker images.
For example, if the existing image is pinned at <code>myimage:1.1</code> then Renovate only proposes upgrades to <code>myimage:1.2</code> or <code>myimage:1.3</code>.
This means that you will not get upgrades to a more specific versions like <code>myimage:1.2.0</code> or <code>myimage:1.3.0</code>.
Renovate does not yet support "pinning" an imprecise version to a precise version, e.g. from <code>myimage:1.2</code> to <code>myimage:1.2.0</code>, however it's a feature we'd like to implement one day.</p>
<h2 id="version-compatibility">Version compatibility</h2>
<p>Although suffixes in SemVer indicate pre-releases (e.g. <code>v1.2.0-alpha.2</code>), in Docker they typically indicate compatibility, e.g. <code>1.2.0-alpine</code>.
By default Renovate assumes suffixes indicate compatibility, for this reason Renovate will not <em>change</em> any suffixes.
Renovate will update <code>1.2.0-alpine</code> to <code>1.2.1-alpine</code> but never updates to <code>1.2.1</code> or <code>1.2.1-stretch</code> as that would change the suffix.</p>
<p>If this behavior does not suit a particular package you have, Renovate allows you to customize the <code>versioning</code> scheme it uses.
For example, you have a Docker image <code>foo/bar</code> that sticks to SemVer versioning.
This means that you need to tell Renovate that suffixes indicate pre-release versions, and not compatibility.</p>
<p>You could then use this <code>packageRules</code> array, to tell Renovate to use <code>semver</code> versioning for the <code>foo/bar</code> package:</p>
<pre><code class="json">{
  &quot;packageRules&quot;: [
    {
      &quot;matchDatasources&quot;: [&quot;docker&quot;],
      &quot;matchPackageNames&quot;: [&quot;foo/bar&quot;],
      &quot;versioning&quot;: &quot;semver&quot;
    }
  ]
}
</code></pre>

<p>Another example is the official <code>python</code> image, which follows <code>pep440</code> versioning.
You can tell Renovate to use the <code>pep440</code> versioning scheme with this set of <code>packageRules</code>:</p>
<pre><code class="json">{
  &quot;packageRules&quot;: [
    {
      &quot;matchDatasources&quot;: [&quot;docker&quot;],
      &quot;matchPackageNames&quot;: [&quot;python&quot;],
      &quot;versioning&quot;: &quot;pep440&quot;
    }
  ]
}
</code></pre>

<p>If traditional versioning doesn't work, try Renovate's built-in <code>loose</code> <code>versioning</code>.
Renovate will perform a best-effort sort of the versions, regardless of whether they contain letters or digits.</p>
<p>If both the traditional versioning, and the <code>loose</code> versioning do not give the results you want, try the <code>regex</code> <code>versioning</code>.
This approach uses regex capture group syntax to specify which part of the version string is major, minor, patch, pre-release, or compatibility.
See the docs for <code>versioning</code> for documentation and examples of <code>regex</code> versioning in action.</p>
<h2 id="digest-pinning">Digest Pinning</h2>
<p>We recommend that you pin your Docker images to an exact digest.
By pinning to a digest you ensure your Docker builds are <strong>immutable</strong>: every time you do a <code>pull</code> you get the same content.</p>
<p>If you have experience with the way dependency versioning is handled in the JavaScript/npm ecosystem, you might be used to exact versions being immutable.
e.g. if you specify a version like <code>2.0.1</code>, you and your colleagues always get the exact same "code".</p>
<p>What you may not know is that Docker's tags are not immutable versions, even if they look like a version.
e.g. you probably expect <code>myimage:1</code> and <code>myimage:1.2</code> to change over time, but you might incorrectly assume that <code>myimage:1.2.0</code> never changes.
Although it probably <em>shouldn't</em>, the reality is that any Docker image tag <em>can</em> change content, and potentially break.</p>
<p>Using a Docker digest as the image's primary identifier instead of using a Docker tag will achieve immutability.
It's not easy to work with strings like <code>FROM node@sha256:d938c1761e3afbae9242848ffbb95b9cc1cb0a24d889f8bd955204d347a7266e</code>.
Luckily Renovate can update the digests for you, so you don't have to.</p>
<p>To keep things simple, Renovate retains the Docker tag in the <code>FROM</code> line, e.g. <code>FROM node:14.15.1@sha256:d938c1761e3afbae9242848ffbb95b9cc1cb0a24d889f8bd955204d347a7266e</code>.
Read on to see how Renovate updates Docker digests.</p>
<h2 id="digest-updating">Digest Updating</h2>
<p>If you follow our advice to go from a simple tag like <code>node:14</code> to using a pinned digest <code>node:14@sha256:d938c1761e3afbae9242848ffbb95b9cc1cb0a24d889f8bd955204d347a7266e</code>, you will receive Renovate PRs whenever the <code>node:14</code> image is updated on Docker Hub.</p>
<p>Previously this update would have been "invisible" to you - one day you pull code that represents <code>node:14.15.0</code> and the next day you get code that represents <code>node:14.15.1</code>.
But you can never be sure, especially as Docker caches.
Perhaps some of your colleagues or worse still your build machine are stuck on an older version with a security vulnerability.</p>
<p>By pinning to a digest instead, you will receive these updates via Pull Requests, or even committed directly to your repository if you enable branch automerge for convenience.
This ensures everyone on the team uses the latest versions and is in sync.</p>
<h2 id="version-upgrading">Version Upgrading</h2>
<p>Renovate also supports <em>upgrading</em> versions in Docker tags, e.g. from <code>myimage:1.2.0</code> to <code>myimage:1.2.1</code> or <code>myimage:1.2</code> to <code>myimage:1.3</code>.
If a tag looks like a version, Renovate will upgrade it like a version.</p>
<p>We recommend you use the major.minor.patch tagging scheme e.g. change from <code>myimage:1</code> to <code>myimage:1.1.1</code>.
This way it's easy to see what the Renovate PR is going to change.
You can see the difference between a PR that upgrades <code>myimage</code> from <code>1.1.1</code> to <code>1.1.2</code>. and a PR that changes the contents of the version you already use (<code>1.1.1</code>).</p>
<p>Currently, Renovate will upgrade minor/patch versions (e.g. from <code>1.2.0</code> to <code>1.2.1</code>) by default, but not upgrade major versions.
If you wish to enable major versions then add the preset <code>docker:enableMajor</code> to your <code>extends</code> array in your <code>renovate.json</code>.</p>
<p>Renovate has some Docker-specific intelligence when it comes to versions.
For example:</p>
<h2 id="configuringdisabling">Configuring/Disabling</h2>
<p>If you wish to make changes that apply to all Docker managers, then add them to the <code>docker</code> config object.
This is not foolproof, because some managers like <code>circleci</code> and <code>ansible</code> support multiple datasources that do not inherit from the <code>docker</code> config object.</p>
<p>If you wish to override Docker settings for one particular type of manager, use that manager's config object instead.
For example, to disable digest updates for Docker Compose only but leave them for other managers like <code>Dockerfile</code>, you would use this:</p>
<pre><code class="json">  &quot;docker-compose&quot;: {
    &quot;digest&quot;: {
      &quot;enabled&quot;: false
    }
  }
</code></pre>

<p>The following configuration options are applicable to Docker:</p>
<h3 id="disable-all-docker-renovation">Disable all Docker Renovation</h3>
<p>Add <code>"docker:disable"</code> to your <code>extends</code> array.</p>
<h3 id="disable-renovate-for-only-certain-dockerfiles">Disable Renovate for only certain Dockerfiles</h3>
<p>Add all paths to ignore into the <code>ignorePaths</code> configuration field. e.g.</p>
<pre><code class="json">{
  &quot;extends&quot;: [&quot;config:base&quot;],
  &quot;ignorePaths&quot;: [&quot;docker/old-files/&quot;]
}
</code></pre>

<h3 id="enable-docker-major-updates">Enable Docker major updates</h3>
<p>Add <code>"docker:enableMajor"</code> to your <code>extends</code> array.</p>
<h3 id="disable-digest-pinning">Disable digest pinning</h3>
<p>Add <code>"default:pinDigestsDisabled"</code> to your <code>extends</code> array.</p>
<h3 id="automerge-digest-updates">Automerge digest updates</h3>
<p>Add <code>"default:automergeDigest"</code> to your <code>extends</code> array.
If you want Renovate to commit directly to your base branch without opening a PR first, add <code>"default:automergeBranchPush"</code> to the <code>extends</code> array.</p>
<h3 id="registry-authentication">Registry authentication</h3>
<p>There are many different registries, and many ways to authenticate to those registries.
We will explain how to authenticate for the most common registries.</p>
<h4 id="dockerhub">DockerHub</h4>
<p>Here is an example of configuring a default Docker username/password in <code>config.js</code>.
The Docker Hub password is stored in a process environment variable.</p>
<pre><code class="js">module.exports = {
  hostRules: [
    {
      hostType: 'docker',
      username: '&lt;your-username&gt;',
      password: process.env.DOCKER_HUB_PASSWORD,
    },
  ],
};
</code></pre>

<p>You can add additional host rules, read the <a href="https://docs.renovatebot.com/configuration-options/#hostrules">hostrules documentation</a> for more information.</p>
<h4 id="self-hosted-docker-registry">Self-hosted Docker registry</h4>
<p>Say you host some Docker images yourself, and use a password to access your self-hosted Docker images.
In addition to self-hosting, you also pull images from Docker Hub, without a password.
In this example you would configure a specific Docker host like this:</p>
<pre><code class="js">module.exports = {
  hostRules: [
    {
      hostType: 'docker',
      hostName: 'your.host.io',
      username: '&lt;your-username&gt;',
      password: process.env.SELF_HOSTED_DOCKER_IMAGES_PASSWORD,
    },
  ],
};
</code></pre>

<h4 id="chartmuseum">ChartMuseum</h4>
<p>Maybe you're running your own ChartMuseum server to host your private Helm Charts.
This is how you connect to a private Helm repository:</p>
<pre><code class="js">module.exports = {
  hostRules: [
    {
      hostName: 'your.host.io',
      username: '&lt;your-username&gt;',
      password: process.env.SELF_HOSTED_HELM_CHARTS_PASSWORD,
    },
  ],
};
</code></pre>

<p>If you need to configure per-repository credentials then you can also configure the above within a repository's Renovate config (e.g. <code>renovate.json</code>).</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../bazel/" title="Bazel" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Bazel
              </span>
            </div>
          </a>
        
        
          <a href="../golang/" title="Golang" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Golang
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../assets/js/fx.js"></script>
      
    
  </body>
</html>