



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The pros and cons of dependency pinning for JavaScript/npm">
      
      
        <link rel="canonical" href="https://docs.renovatebot.com/dependency-pinning/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Should you Pin your JavaScript Dependencies?</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../assets/css/style.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#should-you-pin-your-javascript-dependencies" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.renovatebot.com" title="Renovate Docs" aria-label="Renovate Docs" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Renovate Docs
            </span>
            <span class="md-header-nav__topic">
              
                Should you Pin your JavaScript Dependencies?
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.renovatebot.com" title="Renovate Docs" class="md-nav__button md-logo">
      
        <img alt="logo" src="../assets/images/logo.png" width="48" height="48">
      
    </a>
    Renovate Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-github-app/" title="GitHub App Installation" class="md-nav__link">
      GitHub App Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-gitlab-app/" title="GitLab App Installation" class="md-nav__link">
      GitLab App Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../self-hosting/" title="Self-hosting" class="md-nav__link">
      Self-hosting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-renovate/" title="Configure Renovate (Onboarding PR)" class="md-nav__link">
      Configure Renovate (Onboarding PR)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../private-modules/" title="Private npm module support" class="md-nav__link">
      Private npm module support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reconfigure-renovate/" title="Reconfiguring Renovate" class="md-nav__link">
      Reconfiguring Renovate
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration-options/" title="Configuration Options" class="md-nav__link">
      Configuration Options
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../self-hosted-configuration/" title="Self Hosted Configuration" class="md-nav__link">
      Self Hosted Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Renovate Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Renovate Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/platform/" title="Platforms" class="md-nav__link">
      Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/manager/" title="Managers" class="md-nav__link">
      Managers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/datasource/" title="Datasources" class="md-nav__link">
      Datasources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modules/versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../config-presets/" title="Shareable Config Presets" class="md-nav__link">
      Shareable Config Presets
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Language Support
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Language Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../bazel/" title="Bazel" class="md-nav__link">
      Bazel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../golang/" title="Golang" class="md-nav__link">
      Golang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../java/" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javascript/" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node/" title="Node.js Versions" class="md-nav__link">
      Node.js Versions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nuget/" title="Nuget" class="md-nav__link">
      Nuget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../php/" title="PHP" class="md-nav__link">
      PHP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ruby/" title="Ruby" class="md-nav__link">
      Ruby
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      Deep Dives
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Deep Dives
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Should you Pin your Javascript Dependencies?
      </label>
    
    <a href="./" title="Should you Pin your Javascript Dependencies?" class="md-nav__link md-nav__link--active">
      Should you Pin your Javascript Dependencies?
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-dependency-pinning" class="md-nav__link">
    What is Dependency Pinning?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-ranges" class="md-nav__link">
    Why use ranges?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tilde-vs-caret" class="md-nav__link">
    Tilde vs Caret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ranges-for-libraries" class="md-nav__link">
    Ranges for Libraries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-pin-dependencies" class="md-nav__link">
    Why pin dependencies?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-pinned-versions" class="md-nav__link">
    Upgrading pinned versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downside-of-pinned-dependencies-upgrade-noise" class="md-nav__link">
    Downside of pinned dependencies - upgrade "noise"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reducing-the-noise-of-dependency-updates" class="md-nav__link">
    Reducing the "noise" of dependency updates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pull-request-automerging" class="md-nav__link">
    Pull Request automerging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-automerging" class="md-nav__link">
    Branch automerging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling" class="md-nav__link">
    Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grouping-related-packages" class="md-nav__link">
    Grouping related packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pinning-dependencies-and-lock-files" class="md-nav__link">
    Pinning Dependencies and Lock Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-a-lock-file-will-do-for-you" class="md-nav__link">
    What a lock file will do for you
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-a-lock-file-doesnt-do-for-you" class="md-nav__link">
    What a lock file doesn't do for you
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-about-indirectsub-dependencies" class="md-nav__link">
    What about indirect/sub-dependencies?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-whats-best" class="md-nav__link">
    So what's best?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration-templates/" title="Config Template Editing" class="md-nav__link">
      Config Template Editing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../updating-rebasing/" title="Updating and Rebasing Branches" class="md-nav__link">
      Updating and Rebasing Branches
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../semantic-commits/" title="Semantic Commit Messages" class="md-nav__link">
      Semantic Commit Messages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../noise-reduction/" title="Noise Reduction" class="md-nav__link">
      Noise Reduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../automerge-configuration/" title="Automerging Updates" class="md-nav__link">
      Automerging Updates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Included Presets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Included Presets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-config/" title="Full Config Presets" class="md-nav__link">
      Full Config Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-default/" title="Default Presets" class="md-nav__link">
      Default Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-docker/" title="Docker Presets" class="md-nav__link">
      Docker Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-group/" title="Group Presets" class="md-nav__link">
      Group Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-helpers/" title="Helper Presets" class="md-nav__link">
      Helper Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-monorepo/" title="Monorepo Presets" class="md-nav__link">
      Monorepo Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-packages/" title="Package Presets" class="md-nav__link">
      Package Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-preview/" title="Preview Presets" class="md-nav__link">
      Preview Presets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../presets-schedule/" title="Schedule Presets" class="md-nav__link">
      Schedule Presets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      All Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        All Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../merge-confidence/" title="Merge Confidence" class="md-nav__link">
      Merge Confidence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-dependency-pinning" class="md-nav__link">
    What is Dependency Pinning?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-ranges" class="md-nav__link">
    Why use ranges?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tilde-vs-caret" class="md-nav__link">
    Tilde vs Caret
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ranges-for-libraries" class="md-nav__link">
    Ranges for Libraries
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-pin-dependencies" class="md-nav__link">
    Why pin dependencies?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-pinned-versions" class="md-nav__link">
    Upgrading pinned versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downside-of-pinned-dependencies-upgrade-noise" class="md-nav__link">
    Downside of pinned dependencies - upgrade "noise"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reducing-the-noise-of-dependency-updates" class="md-nav__link">
    Reducing the "noise" of dependency updates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pull-request-automerging" class="md-nav__link">
    Pull Request automerging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-automerging" class="md-nav__link">
    Branch automerging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling" class="md-nav__link">
    Scheduling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grouping-related-packages" class="md-nav__link">
    Grouping related packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pinning-dependencies-and-lock-files" class="md-nav__link">
    Pinning Dependencies and Lock Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-a-lock-file-will-do-for-you" class="md-nav__link">
    What a lock file will do for you
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-a-lock-file-doesnt-do-for-you" class="md-nav__link">
    What a lock file doesn't do for you
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-about-indirectsub-dependencies" class="md-nav__link">
    What about indirect/sub-dependencies?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#so-whats-best" class="md-nav__link">
    So what's best?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="should-you-pin-your-javascript-dependencies">Should you Pin your JavaScript Dependencies?</h1>
<p>Once you start using a tool/service like Renovate, probably the biggest decision you need to make is whether to "pin" your dependencies instead of using SemVer ranges.
The answer is "It's your choice", however we can certainly make some generalisations/recommendations to help you.</p>
<p>If you do not want to read the in-depth discussion, and just want our recommendations, you can skip to the bottom.</p>
<h2 id="what-is-dependency-pinning">What is Dependency Pinning?</h2>
<p>To ensure we're all talking about the same thing, it's important to define exactly what we mean by dependency "pinning".</p>
<p>Historically, projects use SemVer ranges in their <code>package.json</code>.
For instance, if you run <code>npm install foobar</code> you will see an entry like <code>"foobar": "^1.1.0"</code> added to your <code>package.json</code>.
Verbosely, this means "any foobar version greater than or equal to 1.1.0 but less than 2".
Therefore the project will automatically use 1.1.1 if it's released, or 1.2.0, or 1.2.1, etc - meaning you will get not only patch updates but also feature (minor) releases too.</p>
<p>Another alternative is ranges like <code>"foobar": "~1.1.0"</code> which means "any foobar version greater than or equal to 1.1.0 but less than 1.2".
This narrows the range to only patch updates to the 1.1 range.</p>
<p>If instead you "pin" your dependencies rather than use ranges, it means you use exact entries like <code>"foobar": "1.1.0"</code> which means "use only foobar version 1.1.0 and no other".</p>
<h2 id="why-use-ranges">Why use ranges?</h2>
<p>For projects of any type, the main reason to use ranges is so that you can "automatically" get updated releases - which may even include security fixes.
By "automatically", we mean that any time you run <code>npm install</code> you will get the very latest version matching your SemVer - assuming you're not using a lock file, that is.</p>
<h3 id="tilde-vs-caret">Tilde vs Caret</h3>
<p>If you're familiar with the theory of SemVer, you might think that you only need to use tilde ranges (e.g. <code>"~1.1.0"</code>) to get bug fixes, rather than caret ranges (e.g. <code>"^1.1.0"</code>).
This is true in theory but not in practice.
The reality is that for most projects, fixes are not "backported" to previous minor releases, and minor releases themselves may include fixes.
So for example release <code>1.2.0</code> may include one new feature and one fix, so if you stick with <code>1.1.0</code> then you will miss out on the fix as there will never be a <code>1.1.1</code> once <code>1.2.0</code> is already released.
This is the <em>reality</em> of most open source packages.</p>
<h3 id="ranges-for-libraries">Ranges for Libraries</h3>
<p>A second reason for using ranges applies to "libraries" that are published as npm packages with the intention that they are used/<code>require()</code>'d by other packages.
In this case, it is usually a bad idea to pin all your dependencies because it will introduce an unnecessarily narrow range (one release!) and cause most users of your package to bloat their <code>node_modules</code> with duplicates.</p>
<p>For example, you might have pinned <code>foobar</code> to version <code>1.1.0</code> and another author pinned his/her <code>foobar</code> dependency to <code>1.2.2</code>.
Any user of both your packages will end up with npm attempting to install two separate versions of <code>foobar</code>, which might not even work.
Even if both projects use a service like Renovate to keep their pinned dependencies up to date with the very latest versions, it's still not a good idea - there will always be times when one package has updated/released before the other one and they will be out of sync.
e.g. there might be a space of 30 minutes where your package specifies foobar <code>1.1.0</code> and the other one specifies <code>1.1.1</code> and your joint downstream users end up with a duplicate.</p>
<h2 id="why-pin-dependencies">Why pin dependencies?</h2>
<p>You mainly pin versions for certainty, and visibility.
When you have a pinned version of each dependency in your <code>package.json</code>, you know exactly which version of each dependency is installed at any time.
This benefits when upgrading versions as well as when rolling back in case of problems.
Note: we'll cover lock files later, don't worry.</p>
<h3 id="upgrading-pinned-versions">Upgrading pinned versions</h3>
<p>Let's say that a "faulty" version <code>1.2.0</code> of <code>foobar</code> is released and it breaks one of your tests.</p>
<p>If you were using default caret SemVer ranges, then your <code>master</code> branch is now "broken" because its <code>package.json</code> says that any version 1.x above 1.1.0 is acceptable, and npm will choose the latest (<code>1.2.0</code>).
You would need to manually check and work out which dependency caused the failure (<code>foobar</code> may not have been the only dependency to have "automatically" upgraded since the last time your tests passed) and then you would need to pin the dependency yourself to stop <code>npm</code> installing <code>1.2.0</code>.</p>
<p>Consider the same situation if instead you were <em>pinning</em> dependency versions.
Your <code>master</code> would not be broken because it's pinned to <code>foobar@1.1.0</code> - instead you'd just have a Pull Request for upgrading to <code>foobar@1.2.0</code> which would fail.
You'd know not to merge it and can wait for <code>foobar@1.2.1</code> or later when it's fixed.
Therefore you know exactly what you're running and you know exactly what failed - you have great "visibility".</p>
<p>Now consider a similar theoretical scenario where <code>foobar@1.2.0</code> is faulty but it is <em>not</em> caught by any of your automated tests.
This is more common and more dangerous.</p>
<p>If you were using SemVer ranges then this new version of <code>foobar</code> will likely be deployed to production automatically one day, sometime after which you notice errors and realise you need to fix it.
Like before, you need to manually work out which dependency caused it - assuming you guess correctly that it was a new dependency version at fault - and pin it manually by editing <code>package.json</code> one dependency at a time.</p>
<p>Alternatively, if you were instead pinning <code>foobar</code> then you would receive a PR for <code>foobar@1.2.0</code> which awaits your approval.
So first of all, you can choose to read the release notes and/or visually inspect the branch yourself before merging, hopefully saving you from pushing this faulty code to production.</p>
<p>If you did not catch the fault before merging, you are still better off with a pinned version.
If you discover something wrong in production, you can easily "roll back" commits in your development environment until you find which rollback fixes the problem.
Then you can simply revert that commit (reversing <code>foobar@1.1.0</code> -&gt; <code>foobar@1.2.0</code>) and push that to <code>master</code>.
When the next release of <code>foobar</code> comes out (e.g. <code>1.2.1</code>) you will be prompted with a new PR and hopefully inspect it carefully this time before merge!</p>
<p>As you can see in the above, pinning dependencies makes your build more consistent and predictable as a developer.</p>
<h3 id="downside-of-pinned-dependencies-upgrade-noise">Downside of pinned dependencies - upgrade "noise"</h3>
<p>The one major downside to your development workflow of pinning dependencies is the potential for increased "noise" in your repository.
As mentioned above, you can expect to receive Pull Requests whenever there is a new version of your dependencies available.
Depending on how many repositories you maintain, and how many dependencies are in each, you may find this default approach to be overwhelming (e.g. waking up to 10 new Pull Requests each day).</p>
<h2 id="reducing-the-noise-of-dependency-updates">Reducing the "noise" of dependency updates</h2>
<p>The increased volume of Pull Requests for upgrading dependencies may be considered by some to be undesirable "noise" in their day.
To some extent this is simply a trade-off for having your dependencies pinned and predictable, however there are also ways you can reduce this noise while still gaining the majority of the benefits:</p>
<h3 id="pull-request-automerging">Pull Request automerging</h3>
<p>There are some dependencies that either (a) don't have the potential to break something in production, or (b) are fully tested by your tests.</p>
<p>For example, it's very hard for <code>eslint</code> to break anything in production. If your build/tests pass, then you are fine.
Therefore you should consider enabling automerge for all lint packages to save yourself the pointless click when you manually approve them each time.
In this case you might wake up to 5/10 of your overnight Pull Requests having already merged themselves.</p>
<p>Another example of a good candidate for automerging might be a database driver like <code>node-postgres</code> (<code>pg</code> on npm), if you have 100% test coverage of your API.
In that case if the <code>pg</code> package has a minor or patch update and passes all tests then you may as well merge it automatically if you were not going to do a manual inspection anyway.</p>
<h3 id="branch-automerging">Branch automerging</h3>
<p>In the above suggestion of Pull Request automerging, you might still find it annoying if you receive GitHub Notifications for every PR that is created and merged.
In that case, you could set <code>automergeType</code> to <code>branch</code>, which means Renovate will:</p>
<ul>
<li>Create a new branch for testing</li>
<li>Wait until after tests have completed</li>
<li>Push the commit directly to <code>master</code> if tests pass, or</li>
<li>Raise a PR only if tests failed</li>
</ul>
<p>With this approach, updates will be essentially "silent" - causing no notifications - but you will be able to see each commit on <code>master</code> of course.</p>
<h3 id="scheduling">Scheduling</h3>
<p>Although it can feel satisfying to receive updates "immediately" when they're available, the reality is that you usually don't <em>need</em> updates so frequently.
And worse still, npm package versions that are less than 24 hours <a href="https://blog.npmjs.org/post/141905368000/changes-to-npms-unpublish-policy">can be unpublished</a>, which would really break your build if you've pinned to a version that no longer exists.</p>
<p>So to reduce the interruptions of automated dependency updates, consider putting Renovate on a schedule, such as:</p>
<ul>
<li>Update only on weekends? This way you update packages at most once per week, <em>and</em> your CI build runners are likely to be idle anyway</li>
<li>Update daily, but between hours like midnight and 5am? That way notifications don't pop up in people's feed while they're working, <em>and</em> you also get the benefit of not tying up build machines when developers need to use them</li>
</ul>
<h3 id="grouping-related-packages">Grouping related packages</h3>
<p>Although it's good to isolate each dependency update for ease of troubleshooting, there are times when the extra noise isn't worth it, or when packages naturally belong together anyway (such as all <code>babel</code> packages).
You can add a package rule in our Renovate configuration to group these together and you'll get just one branch combined even if multiple packages have updates available.</p>
<h2 id="pinning-dependencies-and-lock-files">Pinning Dependencies and Lock Files</h2>
<p>Since both <code>yarn</code> and <code>npm@5</code> both support lock files, it's a common question to ask "Why should I pin dependencies if I'm already using a lock file?".
It's a good question!</p>
<p><img alt="broken-lockfile" src="../assets/images/broken-lockfile.jpg" /></p>
<p>Lock files are a great companion to SemVer ranges <em>or</em> pinning dependencies, because these files lock (pin) deeper into your dependency tree than you see in <code>package.json</code>.</p>
<h3 id="what-a-lock-file-will-do-for-you">What a lock file will do for you</h3>
<p>When kept in sync with its associated <code>package.json</code>, a lock file will further lock down the exact dependencies and <em>sub</em>-dependencies that your project uses, so that everyone running <code>npm install</code> or <code>yarn install</code> will install the exact same dependencies as the person or bot that last updated the lock file.</p>
<p>To reuse an earlier example, this means that you could have <code>foobar@^1.1.0</code> in your <code>package.json</code> and be locked to <code>1.1.0</code> in your lock file, so that when the broken <code>foobar@1.2.0</code> is released, nobody on the team installs it.</p>
<h3 id="what-a-lock-file-doesnt-do-for-you">What a lock file doesn't do for you</h3>
<p>If a lock file gets out of sync with its <code>package.json</code>, it can no longer be guaranteed to lock anything, and the <code>package.json</code> will be the source of truth for installs.</p>
<p>The lock file has only delayed the inevitable problem, and provides much less visibility than <code>package.json</code>, because it's not designed to be human readable and is quite dense.</p>
<p><img alt="all-dead" src="../assets/images/all-dead.jpg" /></p>
<p>If the <code>package.json</code> contains a range, and a new in-range version is released that would break the build, then essentially your <code>package.json</code> is in a state of "broken", even if the lock file is still holding things together.</p>
<p>The upside is that the lockfile will hold back <code>foobar</code> to <code>1.1.0</code> unless it's forced to upgrade, so the break is postponed.
The downside is <em>how</em> you will discover the break eventually.</p>
<p>The easiest case is if for some reason you <em>need</em> to upgrade <code>foobar</code>, e.g. for a new feature it contains, so you might run something like <code>yarn upgrade foobar</code>.
Then you might either discover the break during your development or when you push your new development to CI for testing.
In this case, hopefully you'll guess it's <code>foobar</code> that broke it and not your own code.</p>
<p>Alternatively, maybe someone thinks "This lockfile is probably really out of date and might be missing some essential patches" and decides to <code>yarn upgrade</code> the whole thing in one go.
No doubt the diff will be full of green and red as many direct and indirect dependencies will have changed versions.
Then it's pushed to CI for testing, fails, and you have to guess which of the changes caused it until you eventually narrow it down to <code>foobar</code>.
This might require even manually looking through the lock file diffs line by line.
Maybe dep <code>blahblah</code> also broke at the same time, to make it even harder.</p>
<p>By ceding control of direct dependency versions to the lock file, you have lost the ability to <em>know</em> when things are updated.
You also may be missing out on really important patches you're not even aware of, because they're "in range" yet locked back to vulnerable or buggy versions in the lock file.</p>
<p>Reconsider the same scenario if <code>foobar</code> had instead been pinned to <code>1.1.0</code> in <code>package.json</code>.
The (broken) upgrade to <code>1.2.0</code> would have been explicitly proposed to you via a Renovate PR, you would see the break, and know that the version is bad.
Meanwhile you could be upgrading all the other essential fixes of other dependencies without worrying about <code>foobar</code>.
You could even be running <code>yarn upgrade</code> regularly to be getting <em>indirect</em> package updates in the lockfile and seeing if everything still passes.</p>
<p>Therefore, the lock file does not solve the same SemVer problems that pinning solves - but it compliments it.
For this reason our usual recommendation using a lock file regardless of whether you pin dependencies or not, and pinning even if you have a lock file.</p>
<p>Don't forget though that our motto is "Flexible, so you don't need to be", so go ahead and configure however you want.
Also, we're open to ideas for how to make lock file updates more "visible" too.
e.g. are you interested in a Renovate feature where you get a lockfile-only PR any time a direct dependency gets an in-range update?</p>
<h2 id="what-about-indirectsub-dependencies">What about indirect/sub-dependencies?</h2>
<p>A good argument made by <a href="https://github.com/LinusU">@LinusU</a> is:</p>
<blockquote>
<p>pinning will only protect you against breakage in a, in many cases, small percentage of your packages. If you for example have installed express and pinned it, you will only protect yourself against a bad express release, it will not help with the 30 dependencies that express has.</p>
<p>Because of this, I personally think that pinning dependencies just creates a false sense of security, and that using a lock file is superior in every way.</p>
</blockquote>
<p>It is true that pinning applies only to direct dependencies, and "indirect" dependencies typically count for a lot more in total in your lockfile than direct.
e.g. those 30 ones that Express relies on.</p>
<p>Does pinning give you "increased" security?
Undeniably.
The question is not whether it does, but whether that increased security comes at a cost (e.g. "noise").
But Linus also points out that a <em>false</em> sense of security is a cost too.</p>
<p>Don't forget that there is some form of transitive trust too.
You need to pick your direct dependencies carefully, and which versions of them you use.
Hopefully in doing that you pick dependencies partly for how well <em>they</em> look after their own dependencies and versions (e.g. do they have good enough test coverage, do they use something like Renovate to keep updated, etc?).
So the reality is that even if 90% of the entries in your lock file are indirect dependencies, those are ones you have somewhat "delegated" responsibility for to your dependencies.
e.g. I'd hope that Express are even better at watching their deps for breaks than I am, to use the example above.</p>
<p>But certainly "does it give a false sense of security" is not a question we can really answer quantifiably.</p>
<h2 id="so-whats-best">So what's best?</h2>
<p>We recommend:</p>
<ol>
<li>Any apps (web or Node.js) that aren't <code>require()</code>'d by other packages should pin all types of dependencies for greatest reliability/predictability</li>
<li>Browser or dual browser/node.js libraries that are consumed/<code>required()</code>'d by others should keep using SemVer ranges for <code>dependencies</code> but can use pinned dependencies for <code>devDependencies</code></li>
<li>Node.js-only libraries can consider pinning all dependencies, because application size/duplicate dependencies are not as much a concern in Node.js compared to the browser. Of course, don't do that if your library is a micro one likely to be consumed in disk-sensitive environments</li>
<li>Use a lock file</li>
</ol>
<p>As noted earlier, when you pin dependencies then you will see an increase in the raw volume of dependency updates, compared to if you use ranges.
If/when this starts bothering you, add Renovate rules to reduce the volume, such as scheduling updates, grouping them, or automerging "safe" ones.</p>
<h2 id="references">References</h2>
<p>This is a "living" document and we plan to update it whenever we think of something new or someone makes a valid point we've missed or misunderstood.
<a href="https://github.com/renovatebot/renovate/blob/master/website/docs/dependency-pinning.md">GitHub Location</a></p>
<p>Updated 2018-01-19 after <a href="https://github.com/commitizen/cz-conventional-changelog-default-export/pull/4#issuecomment-358038966">excellent feedback on lockfiles</a> by <a href="https://github.com/LinusU">@LinusU</a></p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ruby/" title="Ruby" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Ruby
              </span>
            </div>
          </a>
        
        
          <a href="../configuration-templates/" title="Config Template Editing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Config Template Editing
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../assets/js/fx.js"></script>
      
    
  </body>
</html>